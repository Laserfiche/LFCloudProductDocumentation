<?xml version="1.0" encoding="utf-8"?>
<html MadCap:conditions="Default.Complete" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
    </head>
    <body>
        <h1>Notify Project Team Template</h1>
        <p>This workflow emails users when a document has changed. In order to be emailed, the users must add their email addresses to the Workflow Templates: Team Email Address field. </p>
        <p>When a document changes, each person listed in the field named, “Workflow Templates: Team Email Addresses” is emailed, and the field is cleared. The document is moved to the Proposed Plans folder, and the workflow waits until the document has the same number of email addresses as it did before it was changed. Then, the document is moved to the Approved Plans folder.</p>
        <p>Many advanced Workflow features are included in this workflow, such as assigning token values, editing tokens, iterating through each value in a multi-value field, and using the iteration count feature of the Repeat activity.</p>
        <p><a href="Workflow-Templates-Overview.htm" title="Click to learn more." alt="Click to learn more.">Learn more about Workflow templates.</a>
        </p>
        <h2>How it works</h2>
        <ol>
            <li>A <a href="../Activities/Find-Entry.htm" title="Click to learn more." alt="Click to learn more.">Find Entry</a> activity generates a URL for the document the workflow is running on. </li>
            <li>A <a href="../Activities/Move-Entry.htm" title="Click to learn more." alt="Click to learn more.">Move Entry</a> activity moves the document to the \Workflow Templates - Test Entries\Research and Development\Proposed Plans folder. </li>
            <li>A <a href="../Activities/Retrieve-Field-Values.htm" title="Click to learn more." alt="Click to learn more.">Retrieve Field Values</a> activity retrieves all the values from the field named “Workflow Templates: Team Email Addresses.” Besides needing the field values to send emails, the workflow also needs to know how many values are in the field.</li>
            <li>The <a href="../Activities/Assign-Token-Values.htm" title="Click to learn more." alt="Click to learn more.">Assign Token Values</a> activity creates a token, named Original Email Account, from the “Workflow Templates: Team Email Address” token by applying a series of <a href="../Tokens-Regex/Apply-Function-Options.htm" title="Click to learn more." alt="Click to learn more.">functions</a> to the token to get the number of email addresses. (Functions can be accessed by clicking a token and selecting <b>Apply Function</b>.) First, duplicate and empty fields are removed from the  token. Then, the Count function replaces the token with the number of values in the token instead of the values themselves.</li>
            <li>After this initial information about the “Workflow Templates: Team Email Addresses” field is retrieved, a <a href="../Activities/For-Each-Value.htm" title="Click to learn more." alt="Click to learn more.">For Each Value</a> activity goes through each value in the original token (not the edited token), sends them an email to each email address, alerting the recipient that the document has changed. The email includes a list of all the email addresses in the “Workflow Templates: Team Email Addresses” field. Notice how the “Workflow Templates: Team Email Addresses” token has a different syntax in the email as compared to in the For Each Value activity properties box. The syntax indicates that the token is edited so it returns each value on a separate line. You can edit a token by clicking it and selecting <a href="../Tokens-Regex/Token-Index.htm" title="Click to learn more." alt="Click to learn more.">Apply Index</a>.)</li>
            <li>An <a href="../Activities/Assign-Field-Values.htm" title="Click to learn more." alt="Click to learn more.">Assign Field Values</a> activity clears the values in the Workflow Templates: Team Email Addresses field. </li>
            <li>A <a href="../Activities/Repeat.htm" title="Click to learn more." alt="Click to learn more.">Repeat</a> activity ensures that the document gets the same number of email addresses as it had before. Inside the Repeat activity:<ol style="list-style-type: lower-alpha;"><li>	A <a href="../Activities/Wait-for-Entry-Change.htm" title="Click to learn more." alt="Click to learn more.">Wait for Entry Change</a> activity waits until the “Workflow Templates: Team Email Addresses” field changes.</li><li>Then a Retrieve Field Values activity retrieves the new values in the “Workflow Templates: Team Email Addresses” field.</li><li>Using the same editing functions as used to get the initial number of signatures in the field, an Assign Token Values  activity creates a token that has the current number of email addresses in the field.</li></ol></li>
            <li>The Repeat activity then checks to see if the current number of email addresses %(Current Email Count) equals the original number of email addresses %(Original Email Count). If it does, a Move Entry activity moves it to the\Workflow Templates - Test Entries\Research and Development\Archive\Approved Plans folder. If it does not, the activities inside the Repeat activity run again.</li>
        </ol>
        <h2>To run this workflow template in the provided test environment</h2>
        <ol>
            <li>Ensure the WT- Notify Project Team starting event is enabled.<ol style="list-style-type: lower-alpha;"><li>Navigate to the <b>Condition</b> page in <a href="../../Starting-Rules/Starting-Rules.htm" title="Click to learn more." alt="Click to learn more.">Starting Events</a>.</li><li>Select the starting event, and click <b>Enable</b> in the top right. </li></ol></li>
            <li>In your Laserfiche repository, create an annotation on the Plan_D document in the Workflow Templates - Test Entries\Research and Development\Archive\Approved Plans folder. Ensure the document has at least one value in its “Workflow Templates: Team Email Addresses” field. </li>
            <li>Find the document in the \Workflow Templates - Test Entries\Research and Development\Proposed Plans folder, add values to the “Workflow Templates: Team Email Addresses” field and save the document. Once the document has the same number of email addresses as it did originally, it will be moved to the Workflow Templates - Test Entries\Research and Development\Archive\Approved Plan folder.</li>
        </ol>
        <p>Alternatively, you can test the workflow (bypassing the starting event) with the <a href="../Testing-Workflows.htm" title="Click to learn more." alt="Click to learn more.">Run Workflow</a> button in the Workflow Designer. You can test this document on the Plan_D or Plan_E documents the Workflow Templates - Test Entries\Research and Development\Archive\Approved Plan folder. Ensure the document has at least one value in its “Workflow Templates: Team Email Addresses” field. </p>
        <h2>Ideas to expand this workflow</h2>
        <p>Change the Team Email Addresses field to a "Signature" field and have users type their names in that field (instead of their email addresses). Create a lookup table that links names and email addresses, and use a <a href="../Activities/Run-Business-Rules.htm" title="Click for more information about the Run Rule activity." alt="Click for more information about the Run Rule activity.">Run Rule activity</a> to configure a lookup table query that retrieves email addresses based on the names in the Signature field. </p>
        <p>Remember to republish the workflow once you made all desired changes.</p>
    </body>
</html>